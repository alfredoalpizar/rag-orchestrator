# Example: API Documentation
# Use this template for REST API or SDK documentation

metadata:
  # Required fields
  id: "api_user_management"
  title: "User Management API"
  category: "api"
  version: "2.1.0"
  status: "published"

  # Ownership
  owner: "platform-team"
  lastUpdated: "2025-11-24"

  # Organization
  organizationPath: "developer.api.users"
  tags:
    - "api"
    - "users"
    - "authentication"
    - "rest"

  # Access control
  accessRoles:
    - "developer"
    - "architect"
    - "admin"
  platforms:
    - "backend"
    - "web"
    - "mobile"

  # Optional: API-specific fields
  apiVersion: "v2"
  deprecated: false
  baseUrl: "https://api.example.com/v2"
  authentication: "Bearer token"
  rateLimit: "1000 requests/hour"

content:
  summary: "REST API endpoints for managing user accounts and authentication"

  # Body: H2 for overview, H3 for each endpoint
  body: |
    ## Overview

    The User Management API allows you to create, read, update, and delete user accounts
    programmatically. All endpoints require authentication via Bearer token.

    **Base URL:** `https://api.example.com/v2`

    **Authentication:**
    ```
    Authorization: Bearer YOUR_API_TOKEN
    ```

    **Rate Limits:**
    - 1000 requests per hour per API key
    - Burst limit: 100 requests per minute

    ### GET /users

    Retrieve a list of users with optional filtering and pagination.

    **Parameters:**
    - `page` (integer, optional): Page number (default: 1)
    - `limit` (integer, optional): Results per page (default: 20, max: 100)
    - `role` (string, optional): Filter by role (admin, user, guest)
    - `status` (string, optional): Filter by status (active, suspended)

    **Example Request:**
    ```bash
    curl -H "Authorization: Bearer TOKEN" \
      "https://api.example.com/v2/users?page=1&limit=20&role=user"
    ```

    **Example Response:**
    ```json
    {
      "data": [
        {
          "id": "user_123",
          "email": "user@example.com",
          "role": "user",
          "status": "active",
          "created_at": "2025-01-15T10:30:00Z"
        }
      ],
      "pagination": {
        "page": 1,
        "limit": 20,
        "total": 156
      }
    }
    ```

    ### POST /users

    Create a new user account.

    **Request Body:**
    ```json
    {
      "email": "newuser@example.com",
      "password": "secure_password",
      "role": "user",
      "name": "John Doe"
    }
    ```

    **Validation:**
    - `email`: Must be valid email format, unique
    - `password`: Minimum 8 characters, must include letter and number
    - `role`: Must be one of: user, admin, guest
    - `name`: Required, 2-100 characters

    **Example Response:**
    ```json
    {
      "id": "user_456",
      "email": "newuser@example.com",
      "role": "user",
      "status": "active",
      "created_at": "2025-11-24T14:25:00Z"
    }
    ```

    **Error Responses:**
    - `400 Bad Request`: Invalid input data
    - `409 Conflict`: Email already exists
    - `429 Too Many Requests`: Rate limit exceeded

    ### GET /users/{user_id}

    Retrieve details for a specific user.

    **Path Parameters:**
    - `user_id` (string, required): User ID

    **Example Request:**
    ```bash
    curl -H "Authorization: Bearer TOKEN" \
      "https://api.example.com/v2/users/user_123"
    ```

    **Example Response:**
    ```json
    {
      "id": "user_123",
      "email": "user@example.com",
      "role": "user",
      "status": "active",
      "name": "Jane Smith",
      "created_at": "2025-01-15T10:30:00Z",
      "last_login": "2025-11-24T09:15:00Z"
    }
    ```

    ### PUT /users/{user_id}

    Update an existing user account.

    **Path Parameters:**
    - `user_id` (string, required): User ID

    **Request Body:**
    ```json
    {
      "name": "Jane Doe",
      "role": "admin"
    }
    ```

    **Note:** Only include fields you want to update. Email cannot be changed.

    **Example Response:**
    ```json
    {
      "id": "user_123",
      "email": "user@example.com",
      "role": "admin",
      "name": "Jane Doe",
      "updated_at": "2025-11-24T14:30:00Z"
    }
    ```

    ### DELETE /users/{user_id}

    Delete a user account (soft delete - can be restored within 30 days).

    **Path Parameters:**
    - `user_id` (string, required): User ID

    **Example Request:**
    ```bash
    curl -X DELETE -H "Authorization: Bearer TOKEN" \
      "https://api.example.com/v2/users/user_123"
    ```

    **Example Response:**
    ```json
    {
      "id": "user_123",
      "status": "deleted",
      "deleted_at": "2025-11-24T14:35:00Z"
    }
    ```

    **Note:** Deleted users can be restored by contacting support within 30 days.

# Chunking behavior:
# This document will be chunked into 6 chunks:
#   1. Overview (api_user_management::overview)
#   2-6. One chunk per endpoint (api_user_management::section_1, etc.)
# Each chunk will have:
#   - chunk_type: api_overview or api_endpoint
#   - chunk_heading: Endpoint name (e.g., "GET /users")
